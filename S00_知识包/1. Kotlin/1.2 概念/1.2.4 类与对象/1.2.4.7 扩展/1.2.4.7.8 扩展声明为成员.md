## ğŸš€ æ‰©å±•å£°æ˜ä¸ºæˆå‘˜

ğŸ—ï¸ å¯ä»¥åœ¨ä¸€ä¸ªç±»å†…éƒ¨ä¸ºå¦ä¸€ä¸ªç±»å£°æ˜æ‰©å±•ã€‚åœ¨è¿™æ ·çš„æ‰©å±•å†…éƒ¨ï¼Œæœ‰å¤šä¸ª*éšå¼æ¥æ”¶è€…*â€”â€”

ğŸ” å…¶ä¸­çš„å¯¹è±¡æˆå‘˜å¯ä»¥æ— éœ€é€šè¿‡é™å®šç¬¦è®¿é—®ã€‚æ‰©å±•å£°æ˜æ‰€åœ¨çš„ç±»çš„å®ä¾‹ç§°ä¸º

ğŸ­ *åˆ†å‘æ¥æ”¶è€…*ï¼Œæ‰©å±•æ–¹æ³•è°ƒç”¨æ‰€åœ¨çš„æ¥æ”¶è€…ç±»å‹çš„å®ä¾‹ç§°ä¸º*æ‰©å±•æ¥æ”¶è€…*ã€‚

```kotlin
class Host(val hostname: String) {
    fun printHostname() { print(hostname) }
}

class Connection(val host: Host, val port: Int) {
    fun printPort() { print(port) }

    fun Host.printConnectionString() {
         printHostname()   // è°ƒç”¨ Host.printHostname()
        print(":")
         printPort()   // è°ƒç”¨ Connection.printPort()
    }

    fun connect() {
         /*â€¦â€¦*/
         host.printConnectionString()   // è°ƒç”¨æ‰©å±•å‡½æ•°
    }
}

fun main() {
    Connection(Host("kotl.in"), 443).connect()
    //Host("kotl.in").printConnectionString()  // é”™è¯¯ï¼Œè¯¥æ‰©å±•å‡½æ•°åœ¨ Connection å¤–ä¸å¯ç”¨
}
```

ğŸ”„ å¯¹äºåˆ†å‘æ¥æ”¶è€…ä¸æ‰©å±•æ¥æ”¶è€…çš„æˆå‘˜åå­—å†²çªçš„æƒ…å†µï¼Œæ‰©å±•æ¥æ”¶è€…ä¼˜å…ˆã€‚

ğŸ¯ è¦å¼•ç”¨åˆ†å‘æ¥æ”¶è€…çš„æˆå‘˜ä½ å¯ä»¥ä½¿ç”¨ `é™å®šçš„ this è¯­æ³•`ã€‚

```kotlin
class Connection {
    fun Host.getConnectionString() {
        toString()         // è°ƒç”¨ Host.toString()
        this@Connection.toString()  // è°ƒç”¨ Connection.toString()
    }
}
```
ğŸ”“ å£°æ˜ä¸ºæˆå‘˜çš„æ‰©å±•å¯ä»¥å£°æ˜ä¸º `open` å¹¶åœ¨å­ç±»ä¸­è¦†ç›–ã€‚

ğŸ”„ è¿™æ„å‘³ç€è¿™äº›å‡½æ•°çš„åˆ†å‘å¯¹äºåˆ†å‘æ¥æ”¶è€…ç±»å‹æ˜¯è™šæ‹Ÿçš„ï¼Œä½†å¯¹äºæ‰©å±•æ¥æ”¶è€…ç±»å‹æ˜¯é™æ€çš„ã€‚

```kotlin
open class Base { }

class Derived : Base() { }

open class BaseCaller {
    open fun Base.printFunctionInfo() {
        println("Base extension function in BaseCaller")
    }

    open fun Derived.printFunctionInfo() {
        println("Derived extension function in BaseCaller")
    }

    fun call(b: Base) {
        b.printFunctionInfo()   // è°ƒç”¨æ‰©å±•å‡½æ•°
    }
}

class DerivedCaller: BaseCaller() {
    override fun Base.printFunctionInfo() {
        println("Base extension function in DerivedCaller")
    }

    override fun Derived.printFunctionInfo() {
        println("Derived extension function in DerivedCaller")
    }
}

fun main() {
    BaseCaller().call(Base())   // â€œBase extension function in BaseCallerâ€
    DerivedCaller().call(Base())  // â€œBase extension function in DerivedCallerâ€â€”â€”åˆ†å‘æ¥æ”¶è€…è™šæ‹Ÿè§£æ
    DerivedCaller().call(Derived())  // â€œBase extension function in DerivedCallerâ€â€”â€”æ‰©å±•æ¥æ”¶è€…é™æ€è§£æ
}
```