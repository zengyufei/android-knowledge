## 🕰️ 延迟初始化属性与变量

🔍 一般地，属性声明为非空类型必须在构造函数中初始化。

🚫 然而，这经常不方便。

💉 例如：属性可以通过依赖注入来初始化，

🧪 或者在单元测试的 setup 方法中初始化。

❌ 这种情况下，你不能在构造函数内提供一个非空初始器。

✅ 但你仍然想在类体中引用该属性时避免空检测。

#### 🛠️ 为处理这种情况，你可以用 `lateinit` 修饰符标记该属性：

```kotlin
class 形状 {
    init {
        println("初始化形状")
    }
    fun 绘制() {
        println("绘制形状")
    }
}

class 矩形 {
    lateinit var 父类: 形状

    fun 初始化() {
        println("初始化父类")
        父类 = 形状()
    }

    fun 测试() {
        父类.绘制()
    }
}

fun main() {
    val 矩形 = 矩形()
    矩形.初始化()
    矩形.测试()
}

// 初始化父类
// 初始化形状
// 绘制形状
```

🏷️ 该修饰符只能用于在类体中的属性（不是在主构造函数中声明的 `var` 属性，

🔒 并且仅当该属性没有自定义 getter 或 setter 时），也用于顶层属性与局部变量。

🚫 该属性或变量必须为非空类型，并且不能是原生类型。

⚠️ 在初始化前访问一个 `lateinit` 属性会抛出一个特定异常，该异常明确标识该属性被访问及它没有初始化的事实。